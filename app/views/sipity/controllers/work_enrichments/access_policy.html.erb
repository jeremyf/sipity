<%= content_tag :h1, t("sipity/decorators/entitiy_enrichments.call_to_action.#{model.enrichment_type}") %>
<% description = t("sipity/decorators/entitiy_enrichments.description.#{model.enrichment_type}") %>
<%= content_tag( :p, description) if description.present? %>


<%= simple_form_for(
  model,
  url: enrich_work_path(model.work, model.enrichment_type),
  method: :post,
  as: :work,
  html: { class: 'panel panel-primary with-footer' }
) do |f| %>
  <legend class="panel-heading">
    <%= content_tag :h3, t("sipity/decorators/entitiy_enrichments.panels.#{ model.enrichment_type }.title_html"), class: 'panel-title' %>
  </legend>

  <fieldset class="panel-body">
    <%= content_tag :p, t("sipity/decorators/entitiy_enrichments.panels.#{ model.enrichment_type }.hint_html"), class: 'panel-hint' %>
    <%= f.error_notification %>
    <table class="table">
      <caption></caption>
      <thead>
        <tr>
          <th>&nbsp;</th>
          <th class="single-option">Open Access</th>
          <th class="single-option">Restricted to Notre Dame</th>
          <th class="single-option">Private</th>
          <th>Embargo then Open Access</th>
        </tr>
      </thead>
      <tbody>
        <%= f.fields_for :accessible_objects do |field| %>
          <tr>
            <td>
              <p><%= field.object %></p>
            </td>
            <td class="single-option">
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::OPEN_ACCESS) %>
                &#8203;
              </label>
            </td>
            <td class="single-option">
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::RESTRICTED_ACCESS) %>
                &#8203;
              </label>
            </td>
            <td class="single-option">
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::PRIVATE_ACCESS) %>
                &#8203;
              </label>
            </td>
            <td>
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::EMBARGO_THEN_OPEN_ACCESS) %>
                released on
              </label>
              <%= field.input :release_date,
                as: :date,
                input_html: { class: 'form-control' },
                label: false,
                wrapper_html: { class: 'form-inline form-inline-block' }
              %>
            </td>
          </tr>
        <% end %>
      </tbody>
      <tfoot>
        <tr class="borderless">
          <%# TODO: styling and position of the place to where it should appear %>
          <td colspan="5">
            <%= f.input :copyright, collection: model.available_copyrights,
                label_method: :predicate_value, value_method: :predicate_value_code,
                include_blank: false, input_html: { class: 'form-control', selected: model.copyright} %>
          </td>
        </tr>
      </tfoot>
    </table>
  </fieldset>

  <%= model.work.with_action_pane('new_defense_date', 'panel-footer') do %>
    <%= f.submit nil, name: "form/#{model.enrichment_type}/submit" %>
  <% end %>
<% end %>

<%= model.work.with_action_pane('actions') do %>
  <%= link_to t("sipity/decorators/entitiy_enrichments.cancel"), work_path(model.work), class: 'btn btn-default' %>
<% end %>

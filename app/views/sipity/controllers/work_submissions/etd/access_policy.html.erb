<%= content_tag :h1, t("sipity/decorators/entitiy_enrichments.call_to_action.#{model.enrichment_type}") %>
<% description = t("sipity/decorators/entitiy_enrichments.description.#{model.enrichment_type}") %>
<%= content_tag( :p, description) if description.present? %>


<%= simple_form_for(
  model,
  url: enrich_work_path(model.work, model.enrichment_type),
  method: :post,
  as: :work,
  html: { class: 'simple-form panel panel-primary with-footer' }
) do |f| %>
  <legend class="panel-heading">
    <%= content_tag :h3, t("sipity/decorators/entitiy_enrichments.panels.#{ model.enrichment_type }.title_html"), class: 'panel-title' %>
  </legend>

  <fieldset class="panel-body">
    <%= content_tag :p, t("sipity/decorators/entitiy_enrichments.panels.#{ model.enrichment_type }.hint_html"), class: 'panel-hint' %>
    <%= f.error_notification %>
    <%= f.error :base, error_method: :to_sentence %>
    <table class="table">
      <caption><!--TODO? Should we have a caption? --></caption>
      <thead>
        <tr>
          <th>Type</th>
          <th>Title</th>
          <th class="single-option">Open Access</th>
          <th class="single-option">Restricted to Notre Dame</th>
          <th class="single-option">Private</th>
          <th>Embargo then Open Access</th>
        </tr>
      </thead>
      <tbody>
        <%= f.fields_for :accessible_objects do |field| %>
          <tr class="accessible-object <%= dom_class(field.object.entity_type) %>">
            <td>
              <p class="human-model-name"><%= field.object.human_model_name %></p>
            </td>
            <td>
              <p class="title"><%= field.object %></p>
            </td>
            <td class="single-option">
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::OPEN_ACCESS) %>
                &#8203;
              </label>
            </td>
            <td class="single-option">
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::RESTRICTED_ACCESS) %>
                &#8203;
              </label>
            </td>
            <td class="single-option">
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::PRIVATE_ACCESS) %>
                &#8203;
              </label>
            </td>
            <td>
              <label class="radio-inline">
                <%= field.radio_button(:access_right_code, Sipity::Models::AccessRight::EMBARGO_THEN_OPEN_ACCESS) %>
                released on
              </label>
              <%= field.input :release_date,
                as: :date,
                input_html: { class: 'form-control' },
                label: false,
                wrapper_html: { class: 'form-inline form-inline-block' }
              %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div>
      <% if model.available_representative_attachments.any? %>
        <%= f.input :representative_attachment_id, collection: model.available_representative_attachments, input_html: { class: 'form-control' }, required: true %>
      <% end %>
      <%= f.input :copyright, collection: model.available_copyrights,
            label_method: :term_label, value_method: :term_uri,
            include_blank: false, input_html: { class: 'form-control', selected: model.copyright} %>
    </div>
  </fieldset>
  <div class="panel-footer action-pane">
    <%= f.submit nil, name: "form/#{model.enrichment_type}/submit" %>
  </div>
<% end %>

<div class="action-pane">
  <%= link_to t("sipity/decorators/entitiy_enrichments.cancel"), work_path(model.work), class: 'btn btn-default' %>
</div>

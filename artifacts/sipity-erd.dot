digraph "G" {
    compound=true;
    node[color="grey15" shape=record penwidth=2 margin="0.15, 0.125"];

    subgraph cluster_0 {
        label="Sipity ERD (Draft v7)"
        color="seashell3"
        style="filled"
        node[style=filled fillcolor=white color="seashell4"]
        edge[arrowhead="crow"]

        user[label="{ User }"]
        group_entity[label="{ Group | name }"]
        group_membership[label="{ Group Membership | group | user | membership_role }"]
        sip[label="{ SIP | title | processing_state }"]
        event_log[label="{ EventLog | user | entity | event_name }"]
        permission[label="{ Permission | actor | entity | acting_as }"]
        collaborators[label="{ Collaborators | name | role }"]
        account_placeholder[label="{ AccountPlaceholder | identifier | identifier_type | state }"]
        doi_creation_request[label="{ DoiCreationRequest | sip | state }"]
        additional_attributes[label="{ AdditionalAttribute | sip | key | value }"]
        ActorForPermissionAssignment[label="{ ActorForPermissionAssignment | actor | acting_as | work_type }"]
        AccessRight[label="{ AccessRight | entity | access_right | enforcement_start_date | enforcement_end_date }"]
        TransientAnswer[label="{ TransientAnswer | entity | question | answer }"]
        attachment[label="{ Attachment | sip | file }"]
        entity[label="Entity (Polymorphism)"]
        actor[label="Actor (Polymorphism)"]

        user -> group_membership
        group_entity -> group_membership
        sip -> attachment

        attachment -> entity[label="is a" arrowhead=none]
        sip -> entity[label="is a" arrowhead=none]

        entity -> AccessRight
        entity -> TransientAnswer
        entity -> permission
        entity -> event_log

        group_entity -> actor[label="is a" arrowhead=none]
        user -> actor[label="is a" arrowhead=none]
        user -> event_log

        actor -> ActorForPermissionAssignment
        actor -> permission

        sip -> collaborators
        sip -> additional_attributes
        sip -> doi_creation_request[arrowhead=none]
        user -> account_placeholder[arrowhead=none]
    }

}

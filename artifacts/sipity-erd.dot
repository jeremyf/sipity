digraph "G" {
    compound=true;
    node[color="grey15" shape=record penwidth=2 margin="0.15, 0.125"];

    subgraph cluster_0 {
        label="Sipity ERD (Draft v9)"
        color="seashell3"
        node[style=filled fillcolor=white color="seashell4"]
        edge[arrowhead="crow"]

        user[label="{ User }"]
        group_entity[label="{ Group | name }"]
        group_membership[label="{ Group Membership | group | user | membership_role }"]
        work[label="{ Work | title | processing_state | work_type }"]
        work_type[label="{ WorkType (Enumeration)| name }"]
        event_log[label="{ EventLog | user | entity | event_name }"]
        permission[label="{ Permission | actor | entity | acting_as }"]
        collaborators[label="{ Collaborators | name | role }"]
        account_placeholder[label="{ AccountPlaceholder | identifier | identifier_type | state }"]
        doi_creation_request[label="{ DoiCreationRequest | work | state }"]
        additional_attributes[label="{ AdditionalAttribute | work | key | value }"]
        ActorForPermissionAssignment[label="{ ActorForPermissionAssignment | actor | acting_as | work_type }"]
        AccessRight[label="{ AccessRight | entity | access_right | enforcement_start_date | enforcement_end_date }"]
        TransientAnswer[label="{ TransientAnswer | entity | question | answer }"]
        attachment[label="{ Attachment | work | file }"]
        entity[label="Entity (Polymorphism)"]
        actor[label="Actor (Polymorphism)"]
        WorkTypeTodoListConfig[label="{ WorkTypeTodoListConfig | work_type | work_processing_state | enrichment_type | enrichment_group }"]
        TodoItemState [label="{ TodoItemState | entity | entity_processing_state | enrichment_type | enrichment_state }"]

        user -> group_membership
        group_entity -> group_membership
        work -> attachment
        work -> work_type
        work_type -> WorkTypeTodoListConfig
        work_type -> ActorForPermissionAssignment

        attachment -> entity[label="is a" arrowhead=none style="dashed"]
        work -> entity[label="is a" arrowhead=none style="dashed"]
        WorkTypeTodoListConfig -> TodoItemState[label="related to" arrowhead=none style="dotted"]

        entity -> AccessRight
        entity -> TransientAnswer
        entity -> permission
        entity -> event_log
        entity -> TodoItemState

        group_entity -> actor[label="is a" arrowhead=none style="dashed"]
        user -> actor[label="is a" arrowhead=none style="dashed"]
        user -> event_log

        actor -> ActorForPermissionAssignment
        actor -> permission

        work -> collaborators
        work -> additional_attributes
        work -> doi_creation_request[arrowhead=none]
        user -> account_placeholder[arrowhead=none]
    }

}
